<!DOCTYPE html>
<html>
<head>
  <title>Brainrot Link Scanner</title>
  <style>
    body { background: #111; color: #eee; font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    textarea { width: 80%; height: 150px; font-size: 14px; padding: 10px; border-radius: 8px; }
    button { margin-top: 20px; padding: 15px 30px; font-size: 18px; background: #2c7df7; border: none; color: white; border-radius: 10px; cursor: pointer; }
    #output { margin-top: 20px; width: 85%; max-width: 800px; margin-left: auto; margin-right: auto; text-align: left; font-size: 16px; }
    .good { color: #00ff68; }
    .bad { color: #ff6060; }
  </style>
</head>
<body>

<h1>Brainrot Link Scanner</h1>

<textarea id="links" placeholder="Paste Roblox VIP/private server links here..."></textarea><br>
<button onclick="scanLinks()">Scan Links</button>

<div id="output"></div>

<script>
  async function scanLinks() {
    const output = document.getElementById("output");
    const links = document.getElementById("links").value.trim().split("\n");

    output.innerHTML = "Scanning links...<br><br>";

    for (let link of links) {
      if (!link.includes("roblox.com")) {
        output.innerHTML += `<span class='bad'>❌ Invalid link format: ${link}</span><br>`;
        continue;
      }

      try {
        // Extract placeId from the link if possible
        let placeIdMatch = link.match(/games\/(\d+)/);
        let placeId = placeIdMatch ? placeIdMatch[1] : null;

        if (!placeId) {
          output.innerHTML += `<span class='bad'>❌ Cannot detect PlaceID from: ${link}</span><br>`;
          continue;
        }

        const url = `https://games.roblox.com/v1/games/${placeId}/servers/Public?sortOrder=Asc&limit=100`;
        const res = await fetch(url);
        const data = await res.json();

        if (!data || !data.data) {
          output.innerHTML += `<span class='bad'>❌ API error scanning: ${link}</span><br>`;
          continue;
        }

        // Check if any server is empty/low-pop
        let empty = data.data.some(s => s.playing === 0);
        let low = data.data.some(s => s.playing > 0 && s.playing < 3);

        if (empty) {
          output.innerHTML += `<span class='good'>✔ EMPTY server found → ${link}</span><br>`;
        } else if (low) {
          output.innerHTML += `<span class='good'>⚠ LOW PLAYER server → ${link}</span><br>`;
        } else {
          output.innerHTML += `<span class='bad'>❌ No good servers → ${link}</span><br>`;
        }

      } catch (e) {
        output.innerHTML += `<span class='bad'>❌ Error scanning: ${link}</span><br>`;
      }
    }
  }
</script>

</body>
</html>
